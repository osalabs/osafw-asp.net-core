<script type="text/x-template" id="list-table-template">
 <div>
  <form class="fw-card" action="<~../url>" method="post">
    <input type="hidden" name="XSS" value="<~SESSION[XSS]>">
    <input type="hidden" name="_method" value="PUT">
    <~/common/form/relid>

    <div class="table-list-wrapper">
      <div class="table-list-hscroll-hint"><~/common/icons/info-circle-fill> use <kbd>Shift+Mouse Wheel</kbd> for an easy horizontal scrolling
      </div>
      <table class="table table-stripedX table-hover list <~user_view[density] default="table-sm">">
        <~/common/list/thead>
        <tbody class="table-group-divider">
          <template v-for="row in fwStore.list_rows" :key="row.id">
            <tr data-url="<~row_click_url>" :data-id="row.id">
                <td><input class="multicb" type="checkbox" :name="'cb['+row.id+']'" value="1"></td>
                <!--TODO make common component for row btn-->
                <td :class="'text-nowrap d-print-none '+(fwStore.global.is_list_btn_left?'':'text-end')" v-if="fwStore.global.is_list_btn_left">
                  <a href="<~../url>/<~id><~/common/list/relid>">`View`</a>
                  <~/common/dot><a href="<~row_click_url>">`Edit`</a>
                  <~/common/dot> <a href="<~../url>/<~id>/delete<~/common/list/relid>"
                                    class="text-danger on-delete-list-row"
                                    :disabled="fwStore.is_readonly"><~/common/icons/x></a>
                </td>

                <template v-for="(value, key) in row" :key="key">
                  <td>{{key}}={{value}}
                    <~data var unless="is_custom"><~col_custom if="is_custom">
                  </td>
                </template>

                <!--TODO make common component for row btn-->
                <td :class="'text-nowrap d-print-none '+(fwStore.global.is_list_btn_left?'':'text-end')" v-if="!fwStore.global.is_list_btn_left">
                  <a href="<~../url>/<~id><~/common/list/relid>">`View`</a>
                  <~/common/dot><a href="<~row_click_url>">`Edit`</a>
                  <~/common/dot> <a href="<~../url>/<~id>/delete<~/common/list/relid>"
                                    class="text-danger on-delete-list-row"
                                    :disabled="fwStore.is_readonly"><~/common/icons/x></a>
                </td>
            </tr>
          </template>
        </tbody>

      </table>
    </div>

    <div class="text-center py-4" v-if="!fwStore.list_rows">
      <h3><~/common/icons/0-square> `No results`</h3>
      Try to <a href="<~/common/list/reset_filter_relid>">reset</a> all filters.
    </div>

    <div v-if="fwStore.list_rows">
      <div class="float-md-end pt-2 mb-3 d-print-none">
        <span class="badge"></span><br>
        <div class="d-flex justify-content-md-end">
          <~/common/list/pagination>
        </div>
      </div>

      <~/common/list/btn_multidel>
    </div>

  </form>

  <hr class="d-print-none">
  <form id="FOneDelete" action="<~../url>/%id%?XSS=<~SESSION[XSS]>" method="post" class="d-none">
  </form>

 </div>
</script>

<script type="module">
import { mapStores } from 'pinia';

fwApp.component('list-table', {
  template: '#list-table-template',
  props: [],
  state: () => ({
    zzz: ''
  }),
  computed: {
    ...mapStores(useFwStore) //accessible via this.fwStore
  }
});
</script>
