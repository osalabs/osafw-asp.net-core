<script type="text/x-template" id="list-cell-ro-template">
    <div class="ro" :style="styles">{{ formatted }}</div>
</script>

<script type="module">
    import { mapStores } from 'pinia';

    fwApp.component('list-cell-ro', {
        template: '#list-cell-ro-template',
        props: {
            row: {
                type: Object,
                required: true
            },
            col: {
                type: Object,
                required: true
            },
            uioptions: {
                type: Object,
                required: false
            }
        },        
        computed: {
            ...mapStores(fwStore),
            styles() {
                if (this.uioptions?.maxRowHeight) {
                    return { maxHeight: this.uioptions.maxRowHeight + 'px', overflow: 'auto' };
                }
                return {};
            },
            formatted() {
                const v = this.row[this.col.field_name];
                const type = this.col.input_type || this.col.type;
                if (!v) return v;
                if (type === 'date' || type === 'date_popup') {
                    return this.fwStore.formatDate(v);
                }
                if (type === 'datetime' || type === 'datetime_popup') {
                    return this.fwStore.formatDateTime(v);
                }
                return v;
            }
        }
    });
</script>
