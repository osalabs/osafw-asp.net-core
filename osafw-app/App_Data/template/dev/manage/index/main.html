<~/common/form/msg>

<~controller_created if="GLOBAL[_flash][controller_created]" inline>
    <div class="alert alert-success"><~GLOBAL[_flash][controller_created]>.vb controller created, <a href="<~ROOT_URL><~GLOBAL[_flash][controller_url]>"><~GLOBAL[_flash][controller_url]></a>, templates copied, config.json updated</div>
</~controller_created>


<h4>Maintenance</h4>

<ul>
    <li>
        <a href="<~/dev/url>/Configure" target="_blank">Check Configuration</a>
    </li>
    <li>
        <a href="<~/dev/url>/SelfTest" target="_blank">Self Test</a>
    </li>
    <li>
        <a href="<~../url>/(DumpLog)?seek=5000" target="_blank">Dump log</a>
    </li>
    <li>
        <a href="<~../url>/(ResetCache)">Clear Application Cache</a>
    </li>
</ul>

<hr>

<h4>Development</h4>

entities &rarr; db.json &rarr; DB &rarr; models &rarr; controllers
<div class="text-muted">or</div>
existing DB &rarr; db.json &rarr; models &rarr; controllers

<h5 class="mt-4"><a href="<~../url>/(EntityBuilder)">1. Entity Builder</a></h5>
<h5 class="mt-4"><a href="<~../url>/(DBInitializer)">2. DB Initalizer</a></h5>
<h5 class="mt-4"><a href="<~../url>/(AppCreator)">3. App Creator</a></h5>

<h5 class="mt-4">Tools</h5>
<ul>
    <li>
        <a href="<~../url>/(DBAnalyzer)">Existing DB Analyzer</a>
    </li>
    <li>
        <a href="<~../url>/(DeleteMenuItems)">Delete Menu Items</a>
    </li>
    <li>
        <a href="<~../url>/(ReloadSession)">Reload Session</a>
    </li>
    <li>
        <a href="<~../url>/(ShowDBUpdates)">Apply DB Updates or refresh Views</a>
    </li>
</ul>

<h5 class="mt-4">Analyse External DB and create db.json</h5>
<form method="post" action="<~../url>/(AnalyseDB)" class="row row-cols-auto g-2">
    <input type="hidden" name="XSS" value="<~session[XSS]>">
    <div class="col">
        <input name="item[connstr]" value="<~i[connstr] default="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\myFolder\myAccessFile.accdb;Persist Security Info=False;">" type="text" class="form-control ms-2" required placeholder="Connection String" style="width:800px">
    </div>
    <div class="col">
        <button class="btn btn-default ms-2">Analyse</button>
    </div>
</form>

<h5 class="mt-4">Quick Create Models and Controllers</h5>
<ul>
    <li>
        <form method="post" action="<~../url>/(CreateModel)" class="row row-cols-auto g-2">
            <input type="hidden" name="XSS" value="<~session[XSS]>">
            <div class="col">
                <select name="item[table_name]" class="form-select on-change-table" style="width:200px">
                  <option value="">- select table -</option>
                  <~select_tables select="i[table_name]">
                </select>
            </div>
            <div class="col">
                <input id="model_name" name="item[model_name]" maxlength="255" value="<~i[model_name]>" type="text" class="form-control ms-2" placeholder="Model name (plural)" style="width:300px">
            </div>
            <div class="col">
                <button class="btn btn-default ms-2">Create Model</button>
            </div>
        </form>
    </li>
    <li class="mt-2">
        <form method="post" action="<~../url>/(CreateController)" class="row row-cols-auto g-2">
            <input type="hidden" name="XSS" value="<~session[XSS]>">
            <div class="col">
                <select name="item[model_name]" class="form-select on-change-model" style="width:200px">
                  <option value="">- select model -</option>
                  <~select_models select="i[model_name]">
                </select>
            </div>
            <div class="col">
                <input id="controller_url" name="item[controller_url]" maxlength="255" value="<~i[controller_url]>" type="text" class="form-control ms-2" placeholder="Controller URL (ex: /Admin/Demos)" style="width:300px">
            </div>
            <div class="col">
                <input id="controller_title" name="item[controller_title]" maxlength="255" value="<~i[controller_title]>" type="text" class="form-control ms-2" placeholder="Title (singular)" style="width:300px">
            </div>
            <div class="col">
                <select name="item[controller_type]" class="form-select">
                  <~ctype.sel select="i[controller_type]">
                </select>
            </div>
            <div class="col">
                <button class="btn btn-default ms-2">Create Controller</button>
            </div>
        </form>
    </li>
    <li class="mt-2">
        <form method="post" action="<~../url>/(ExtractController)" class="row row-cols-auto g-2">
            <input type="hidden" name="XSS" value="<~session[XSS]>">
            <div class="col">
                <select name="item[controller_name]" class="form-select" style="width:200px">
                  <option value="">- select controller -</option>
                  <~select_controllers select="i[controller_name]">
                </select>
            </div>
            <div class="col">
                <button class="btn btn-default ms-2">Extract Controller</button>
            </div>
        </form>
    </li>
</ul>

