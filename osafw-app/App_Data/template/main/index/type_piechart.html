<div class="chart-container">
    <div id="chart_<~id>" style="height:220px;"></div>
</div>
<script>
  (function () {
    var el = document.getElementById("chart_<~id>");
    if (!el || !window.fwEcharts) {
      return;
    }
    var rows = <~rows json> || [];
    var seriesData = rows.map(function (row) {
      return { value: Number(row.ivalue || 0), name: row.ilabel };
    });
    window.fwEcharts.ensureChart(el, {
      tooltip: { trigger: "item" },
      legend: { bottom: 0 },
      series: [
        {
          type: "pie",
          radius: "60%",
          data: seriesData,
          label: { formatter: "{b}: {c}" }
        }
      ]
    });
  })();
</script>
