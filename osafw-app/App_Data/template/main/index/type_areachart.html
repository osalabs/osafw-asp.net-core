<div class="chart-container">
    <div id="chart_<~id>" style="height:220px;"></div>
</div>
<script>
  (function () {
    var el = document.getElementById("chart_<~id>");
    if (!el || !window.fwEcharts) {
      return;
    }
    var rows = <~rows json> || [];
    var labels = rows.map(function (row) { return row.ilabel; });
    var values = rows.map(function (row) { return Number(row.ivalue || 0); });
    window.fwEcharts.ensureChart(el, {
      tooltip: { trigger: "axis" },
      grid: { left: 32, right: 16, top: 16, bottom: 24 },
      xAxis: {
        type: "category",
        data: labels,
        axisLabel: { fontSize: 10 }
      },
      yAxis: { type: "value" },
      series: [
        {
          type: "line",
          data: values,
          smooth: true,
          areaStyle: { opacity: 0.2 },
          lineStyle: { color: "#6f42c1" },
          itemStyle: { color: "#6f42c1" }
        }
      ]
    });
  })();
</script>
